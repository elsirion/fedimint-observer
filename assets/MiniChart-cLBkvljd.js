import{u as Oe,r as E,j as B}from"./index-C-EKVfAA.js";import{_ as O,c as Te,L as G,S as Be,ag as Ne,y as We,aE as pe,q as Ve,aF as J,o as he,aG as Je,k as Qe,i as X,u as V,s as et,K as tt,aH as ve,G as ge,aI as rt,f as $,E as at,N as ze,aJ as Ee,an as M,b as K,g as nt,d as Fe,j as it,aK as ot,t as st,C as lt,aL as ct,U as ut,aj as N,aM as ht,aN as gt,W as dt,aO as pt,a6 as vt,a3 as Z,aP as ft,a4 as $e,aQ as yt,aR as mt,a5 as xt,a9 as bt,am as fe,B as St,aS as At,aT as _t,I as ie,aq as ye,H as me,ar as Ct,aU as wt,aV as F,aa as It,aW as Pt,a as Dt,aX as Lt,al as Rt,aY as kt,aZ as Gt,z as Ot,$ as Tt,a_ as Bt,ay as q,az as Me,aA as Ue,aB as Nt,aC as Wt,aD as Vt}from"./installCanvasRenderer-CQ76oFoK.js";var oe=(function(a){O(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,t){return Te(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(e,t,n){var i=this.coordinateSystem;if(i&&i.clampData){var o=i.clampData(e),u=i.dataToPoint(o);if(n)G(i.getAxes(),function(g,d){if(g.type==="category"&&t!=null){var p=g.getTicksCoords(),v=g.getTickModel().get("alignWithLabel"),f=o[d],m=t[d]==="x1"||t[d]==="y1";if(m&&!v&&(f+=1),p.length<2)return;if(p.length===2){u[d]=g.toGlobalCoord(g.getExtent()[m?1:0]);return}for(var y=void 0,x=void 0,A=1,b=0;b<p.length;b++){var S=p[b].coord,_=b===p.length-1?p[b-1].tickValue+A:p[b].tickValue;if(_===f){x=S;break}else if(_<f)y=S;else if(y!=null&&_>f){x=(S+y)/2;break}b===1&&(A=_-p[0].tickValue)}x==null&&(y?y&&(x=p[p.length-1].coord):x=p[0].coord),u[d]=g.toGlobalCoord(x)}});else{var l=this.getData(),s=l.getLayout("offset"),c=l.getLayout("size"),h=i.getBaseAxis().isHorizontal()?0:1;u[h]+=s+c/2}return u}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r})(Be);Be.registerClass(oe);var zt=(function(a){O(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(){return Te(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},r.prototype.brushSelector=function(e,t,n){return n.rect(t.getItemLayout(e))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=Ne(oe.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r})(oe),Et=(function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a})(),xe=(function(a){O(r,a);function r(e){var t=a.call(this,e)||this;return t.type="sausage",t}return r.prototype.getDefaultShape=function(){return new Et},r.prototype.buildPath=function(e,t){var n=t.cx,i=t.cy,o=Math.max(t.r0||0,0),u=Math.max(t.r,0),l=(u-o)*.5,s=o+l,c=t.startAngle,h=t.endAngle,g=t.clockwise,d=Math.PI*2,p=g?h-c<d:c-h<d;p||(c=h-(g?d:-d));var v=Math.cos(c),f=Math.sin(c),m=Math.cos(h),y=Math.sin(h);p?(e.moveTo(v*o+n,f*o+i),e.arc(v*s+n,f*s+i,l,-Math.PI+c,c,!g)):e.moveTo(v*u+n,f*u+i),e.arc(n,i,u,c,h,!g),e.arc(m*s+n,y*s+i,l,h-Math.PI*2,h-Math.PI,!g),o!==0&&e.arc(n,i,o,h,c,g)},r})(We);function Ft(a,r){r=r||{};var e=r.isRoundCap;return function(t,n,i){var o=n.position;if(!o||o instanceof Array)return pe(t,n,i);var u=a(o),l=n.distance!=null?n.distance:5,s=this.shape,c=s.cx,h=s.cy,g=s.r,d=s.r0,p=(g+d)/2,v=s.startAngle,f=s.endAngle,m=(v+f)/2,y=e?Math.abs(g-d)/2:0,x=Math.cos,A=Math.sin,b=c+g*x(v),S=h+g*A(v),_="left",w="top";switch(u){case"startArc":b=c+(d-l)*x(m),S=h+(d-l)*A(m),_="center",w="top";break;case"insideStartArc":b=c+(d+l)*x(m),S=h+(d+l)*A(m),_="center",w="bottom";break;case"startAngle":b=c+p*x(v)+U(v,l+y,!1),S=h+p*A(v)+H(v,l+y,!1),_="right",w="middle";break;case"insideStartAngle":b=c+p*x(v)+U(v,-l+y,!1),S=h+p*A(v)+H(v,-l+y,!1),_="left",w="middle";break;case"middle":b=c+p*x(m),S=h+p*A(m),_="center",w="middle";break;case"endArc":b=c+(g+l)*x(m),S=h+(g+l)*A(m),_="center",w="bottom";break;case"insideEndArc":b=c+(g-l)*x(m),S=h+(g-l)*A(m),_="center",w="top";break;case"endAngle":b=c+p*x(f)+U(f,l+y,!0),S=h+p*A(f)+H(f,l+y,!0),_="left",w="middle";break;case"insideEndAngle":b=c+p*x(f)+U(f,-l+y,!0),S=h+p*A(f)+H(f,-l+y,!0),_="right",w="middle";break;default:return pe(t,n,i)}return t=t||{},t.x=b,t.y=S,t.align=_,t.verticalAlign=w,t}}function $t(a,r,e,t){if(Ve(t)){a.setTextConfig({rotation:t});return}else if(J(r)){a.setTextConfig({rotation:0});return}var n=a.shape,i=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,u=(i+o)/2,l,s=e(r);switch(s){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=u;break;case"startAngle":case"insideStartAngle":l=i;break;case"endAngle":case"insideEndAngle":l=o;break;default:a.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;s==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),a.setTextConfig({rotation:c})}function U(a,r,e){return r*Math.sin(a)*(e?-1:1)}function H(a,r,e){return r*Math.cos(a)*(e?1:-1)}function Mt(a,r,e){var t=a.get("borderRadius");if(t==null)return{cornerRadius:0};J(t)||(t=[t,t,t,t]);var n=Math.abs(r.r||0-r.r0||0);return{cornerRadius:he(t,function(i){return Je(i,n)})}}var te=Math.max,re=Math.min;function Ut(a,r){var e=a.getArea&&a.getArea();if(ze(a,"cartesian2d")){var t=a.getBaseAxis();if(t.type!=="category"||!t.onBand){var n=r.getLayout("bandWidth");t.isHorizontal()?(e.x-=n,e.width+=n*2):(e.y-=n,e.height+=n*2)}}return e}var Ht=(function(a){O(r,a);function r(){var e=a.call(this)||this;return e.type=r.type,e._isFirstFrame=!0,e}return r.prototype.render=function(e,t,n,i){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var o=e.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n,i))},r.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},r.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},r.prototype.eachRendered=function(e){Qe(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;(this._isLargeDraw==null||t!==this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},r.prototype._renderNormal=function(e,t,n,i){var o=this.group,u=e.getData(),l=this._data,s=e.coordinateSystem,c=s.getBaseAxis(),h;s.type==="cartesian2d"?h=c.isHorizontal():s.type==="polar"&&(h=c.dim==="angle");var g=e.isAnimationEnabled()?e:null,d=jt(e,s);d&&this._enableRealtimeSort(d,u,n);var p=e.get("clip",!0)||d,v=Ut(s,u);o.removeClipPath();var f=e.get("roundCap",!0),m=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),x=y.get("borderRadius")||0,A=[],b=this._backgroundEls,S=i&&i.isInitSort,_=i&&i.type==="changeAxisOrder";function w(C){var D=j[s.type](u,C),I=Qt(s,h,D);return I.useStyle(y.getItemStyle()),s.type==="cartesian2d"?I.setShape("r",x):I.setShape("cornerRadius",x),A[C]=I,I}u.diff(l).add(function(C){var D=u.getItemModel(C),I=j[s.type](u,C,D);if(m&&w(C),!(!u.hasValue(C)||!Ce[s.type](I))){var L=!1;p&&(L=be[s.type](v,I));var P=Se[s.type](e,u,C,I,h,g,c.model,!1,f);d&&(P.forceLabelAnimation=!0),we(P,u,C,D,I,e,h,s.type==="polar"),S?P.attr({shape:I}):d?Ae(d,g,P,I,C,h,!1,!1):X(P,{shape:I},e,C),u.setItemGraphicEl(C,P),o.add(P),P.ignore=L}}).update(function(C,D){var I=u.getItemModel(C),L=j[s.type](u,C,I);if(m){var P=void 0;b.length===0?P=w(D):(P=b[D],P.useStyle(y.getItemStyle()),s.type==="cartesian2d"?P.setShape("r",x):P.setShape("cornerRadius",x),A[C]=P);var Ze=j[s.type](u,C),qe=je(h,Ze,s);V(P,{shape:qe},g,C)}var R=l.getItemGraphicEl(D);if(!u.hasValue(C)||!Ce[s.type](L)){o.remove(R);return}var Q=!1;if(p&&(Q=be[s.type](v,L),Q&&o.remove(R)),R?et(R):R=Se[s.type](e,u,C,L,h,g,c.model,!!R,f),d&&(R.forceLabelAnimation=!0),_){var de=R.getTextContent();if(de){var ee=tt(de);ee.prevValue!=null&&(ee.prevValue=ee.value)}}else we(R,u,C,I,L,e,h,s.type==="polar");S?R.attr({shape:L}):d?Ae(d,g,R,L,C,h,!0,_):V(R,{shape:L},e,C,null),u.setItemGraphicEl(C,R),R.ignore=Q,o.add(R)}).remove(function(C){var D=l.getItemGraphicEl(C);D&&ve(D,e,C)}).execute();var T=this._backgroundGroup||(this._backgroundGroup=new ge);T.removeAll();for(var k=0;k<A.length;++k)T.add(A[k]);o.add(T),this._backgroundEls=A,this._data=u},r.prototype._renderLarge=function(e,t,n){this._clear(),Pe(e,this.group),this._updateLargeClip(e)},r.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),Pe(t,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&rt(e.coordinateSystem,!1,e),n=this.group;t?n.setClipPath(t):n.removeClipPath()},r.prototype._enableRealtimeSort=function(e,t,n){var i=this;if(t.count()){var o=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,n),this._isFirstFrame=!1;else{var u=function(l){var s=t.getItemGraphicEl(l),c=s&&s.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){i._updateSortWithinSameData(t,u,o,n)},n.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(e,t,n){var i=[];return e.each(e.mapDimension(t.dim),function(o,u){var l=n(u);l=l??NaN,i.push({dataIndex:u,mappedValue:l,ordinalNumber:o})}),i.sort(function(o,u){return u.mappedValue-o.mappedValue}),{ordinalNumbers:he(i,function(o){return o.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(e,t,n){for(var i=n.scale,o=e.mapDimension(n.dim),u=Number.MAX_VALUE,l=0,s=i.getOrdinalMeta().categories.length;l<s;++l){var c=e.rawIndexOf(o,i.getRawOrdinalNumber(l)),h=c<0?Number.MIN_VALUE:t(e.indexOfRawIndex(c));if(h>u)return!0;u=h}return!1},r.prototype._isOrderDifferentInView=function(e,t){for(var n=t.scale,i=n.getExtent(),o=Math.max(0,i[0]),u=Math.min(i[1],n.getOrdinalMeta().categories.length-1);o<=u;++o)if(e.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},r.prototype._updateSortWithinSameData=function(e,t,n,i){if(this._isOrderChangedWithinSameData(e,t,n)){var o=this._dataSort(e,n,t);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},r.prototype._dispatchInitSort=function(e,t,n){var i=t.baseAxis,o=this._dataSort(e,i,function(u){return e.get(e.mapDimension(t.otherAxis.dim),u)});n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:o})},r.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},r.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},r.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(e){var t=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){ve(i,e,$(i).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r})(at),be={cartesian2d:function(a,r){var e=r.width<0?-1:1,t=r.height<0?-1:1;e<0&&(r.x+=r.width,r.width=-r.width),t<0&&(r.y+=r.height,r.height=-r.height);var n=a.x+a.width,i=a.y+a.height,o=te(r.x,a.x),u=re(r.x+r.width,n),l=te(r.y,a.y),s=re(r.y+r.height,i),c=u<o,h=s<l;return r.x=c&&o>n?u:o,r.y=h&&l>i?s:l,r.width=c?0:u-o,r.height=h?0:s-l,e<0&&(r.x+=r.width,r.width=-r.width),t<0&&(r.y+=r.height,r.height=-r.height),c||h},polar:function(a,r){var e=r.r0<=r.r?1:-1;if(e<0){var t=r.r;r.r=r.r0,r.r0=t}var n=re(r.r,a.r),i=te(r.r0,a.r0);r.r=n,r.r0=i;var o=n-i<0;if(e<0){var t=r.r;r.r=r.r0,r.r0=t}return o}},Se={cartesian2d:function(a,r,e,t,n,i,o,u,l){var s=new M({shape:K({},t),z2:1});if(s.__dataIndex=e,s.name="item",i){var c=s.shape,h=n?"height":"width";c[h]=0}return s},polar:function(a,r,e,t,n,i,o,u,l){var s=!n&&l?xe:Ee,c=new s({shape:t,z2:1});c.name="item";var h=He(n);if(c.calculateTextPosition=Ft(h,{isRoundCap:s===xe}),i){var g=c.shape,d=n?"r":"endAngle",p={};g[d]=n?t.r0:t.startAngle,p[d]=t[d],(u?V:X)(c,{shape:p},i)}return c}};function jt(a,r){var e=a.get("realtimeSort",!0),t=r.getBaseAxis();if(e&&t.type==="category"&&r.type==="cartesian2d")return{baseAxis:t,otherAxis:r.getOtherAxis(t)}}function Ae(a,r,e,t,n,i,o,u){var l,s;i?(s={x:t.x,width:t.width},l={y:t.y,height:t.height}):(s={y:t.y,height:t.height},l={x:t.x,width:t.width}),u||(o?V:X)(e,{shape:l},r,n,null);var c=r?a.baseAxis.model:null;(o?V:X)(e,{shape:s},c,n)}function _e(a,r){for(var e=0;e<r.length;e++)if(!isFinite(a[r[e]]))return!0;return!1}var Yt=["x","y","width","height"],Xt=["cx","cy","r","startAngle","endAngle"],Ce={cartesian2d:function(a){return!_e(a,Yt)},polar:function(a){return!_e(a,Xt)}},j={cartesian2d:function(a,r,e){var t=a.getItemLayout(r),n=e?Zt(e,t):0,i=t.width>0?1:-1,o=t.height>0?1:-1;return{x:t.x+i*n/2,y:t.y+o*n/2,width:t.width-i*n,height:t.height-o*n}},polar:function(a,r,e){var t=a.getItemLayout(r);return{cx:t.cx,cy:t.cy,r0:t.r0,r:t.r,startAngle:t.startAngle,endAngle:t.endAngle,clockwise:t.clockwise}}};function Kt(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function He(a){return(function(r){var e=r?"Arc":"Angle";return function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}})(a)}function we(a,r,e,t,n,i,o,u){var l=r.getItemVisual(e,"style");if(u){if(!i.get("roundCap")){var c=a.shape,h=Mt(t.getModel("itemStyle"),c);K(c,h),a.setShape(c)}}else{var s=t.get(["itemStyle","borderRadius"])||0;a.setShape("r",s)}a.useStyle(l);var g=t.getShallow("cursor");g&&a.attr("cursor",g);var d=u?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",p=nt(t);Fe(a,p,{labelFetcher:i,labelDataIndex:e,defaultText:it(i.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:d});var v=a.getTextContent();if(u&&v){var f=t.get(["label","position"]);a.textConfig.inside=f==="middle"?!0:null,$t(a,f==="outside"?d:f,He(o),t.get(["label","rotate"]))}ot(v,p,i.getRawValue(e),function(y){return ut(r,y)});var m=t.getModel(["emphasis"]);st(a,m.get("focus"),m.get("blurScope"),m.get("disabled")),lt(a,t),Kt(n)&&(a.style.fill="none",a.style.stroke="none",G(a.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function Zt(a,r){var e=a.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var t=a.get(["itemStyle","borderWidth"])||0,n=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),i=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(t,n,i)}var qt=(function(){function a(){}return a})(),Ie=(function(a){O(r,a);function r(e){var t=a.call(this,e)||this;return t.type="largeBar",t}return r.prototype.getDefaultShape=function(){return new qt},r.prototype.buildPath=function(e,t){for(var n=t.points,i=this.baseDimIdx,o=1-this.baseDimIdx,u=[],l=[],s=this.barWidth,c=0;c<n.length;c+=3)l[i]=s,l[o]=n[c+2],u[i]=n[c+i],u[o]=n[c+o],e.rect(u[0],u[1],l[0],l[1])},r})(We);function Pe(a,r,e,t){var n=a.getData(),i=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),u=n.getLayout("size"),l=a.getModel("backgroundStyle"),s=n.getLayout("largeBackgroundPoints");if(s){var c=new Ie({shape:{points:s},incremental:!!t,silent:!0,z2:0});c.baseDimIdx=i,c.largeDataIndices=o,c.barWidth=u,c.useStyle(l.getItemStyle()),r.add(c),e&&e.push(c)}var h=new Ie({shape:{points:n.getLayout("largePoints")},incremental:!!t,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=i,h.largeDataIndices=o,h.barWidth=u,r.add(h),h.useStyle(n.getVisual("style")),h.style.stroke=null,$(h).seriesIndex=a.seriesIndex,a.get("silent")||(h.on("mousedown",De),h.on("mousemove",De)),e&&e.push(h)}var De=ct(function(a){var r=this,e=Jt(r,a.offsetX,a.offsetY);$(r).dataIndex=e>=0?e:null},30,!1);function Jt(a,r,e){for(var t=a.baseDimIdx,n=1-t,i=a.shape.points,o=a.largeDataIndices,u=[],l=[],s=a.barWidth,c=0,h=i.length/3;c<h;c++){var g=c*3;if(l[t]=s,l[n]=i[g+2],u[t]=i[g+t],u[n]=i[g+n],l[n]<0&&(u[n]+=l[n],l[n]=-l[n]),r>=u[0]&&r<=u[0]+l[0]&&e>=u[1]&&e<=u[1]+l[1])return o[c]}return-1}function je(a,r,e){if(ze(e,"cartesian2d")){var t=r,n=e.getArea();return{x:a?t.x:n.x,y:a?n.y:t.y,width:a?t.width:n.width,height:a?n.height:t.height}}else{var n=e.getArea(),i=r;return{cx:n.cx,cy:n.cy,r0:a?n.r0:i.r0,r:a?n.r:i.r,startAngle:a?i.startAngle:0,endAngle:a?i.endAngle:Math.PI*2}}}function Qt(a,r,e){var t=a.type==="polar"?Ee:M;return new t({shape:je(r,e,a),silent:!0,z2:0})}function er(a){a.registerChartView(Ht),a.registerSeriesModel(zt),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,N(ht,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,gt("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dt("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,e){var t=r.componentType||"series";e.eachComponent({mainType:t,query:r},function(n){r.sortInfo&&n.axis.setCategorySortInfo(r.sortInfo)})})}function tr(a,r){var e=pt(r.get("padding")),t=r.getItemStyle(["color","opacity"]);return t.fill=r.get("backgroundColor"),a=new M({shape:{x:a.x-e[3],y:a.y-e[0],width:a.width+e[1]+e[3],height:a.height+e[0]+e[2],r:r.get("borderRadius")},style:t,silent:!0,z2:-1}),a}var rr=function(a,r){if(r==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(r==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},se=(function(a){O(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.layoutMode={type:"box",ignoreSize:!0},e}return r.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},r.prototype.mergeOption=function(e,t){a.prototype.mergeOption.call(this,e,t),this._updateSelector(e)},r.prototype._updateSelector=function(e){var t=e.selector,n=this.ecModel;t===!0&&(t=e.selector=["all","inverse"]),J(t)&&G(t,function(i,o){Z(i)&&(i={type:i}),t[o]=vt(i,rr(n,i.type))})},r.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var t=!1,n=0;n<e.length;n++){var i=e[n].get("name");if(this.isSelected(i)){this.select(i),t=!0;break}}!t&&this.select(e[0].get("name"))}},r.prototype._updateData=function(e){var t=[],n=[];e.eachRawSeries(function(l){var s=l.name;n.push(s);var c;if(l.legendVisualProvider){var h=l.legendVisualProvider,g=h.getAllNames();e.isSeriesFiltered(l)||(n=n.concat(g)),g.length?t=t.concat(g):c=!0}else c=!0;c&&ft(l)&&t.push(l.name)}),this._availableNames=n;var i=this.get("data")||t,o=$e(),u=he(i,function(l){return(Z(l)||Ve(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new yt(l,this,this.ecModel))},this);this._data=mt(u,function(l){return!!l})},r.prototype.getData=function(){return this._data},r.prototype.select=function(e){var t=this.option.selected,n=this.get("selectedMode");if(n==="single"){var i=this._data;G(i,function(o){t[o.get("name")]=!1})}t[e]=!0},r.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},r.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},r.prototype.allSelect=function(){var e=this._data,t=this.option.selected;G(e,function(n){t[n.get("name",!0)]=!0})},r.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;G(e,function(n){var i=n.get("name",!0);t.hasOwnProperty(i)||(t[i]=!0),t[i]=!t[i]})},r.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&xt(this._availableNames,e)>=0},r.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},r.type="legend.plain",r.dependencies=["series"],r.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},r})(bt),W=N,le=G,Y=ge,Ye=(function(a){O(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.newlineDisabled=!1,e}return r.prototype.init=function(){this.group.add(this._contentGroup=new Y),this.group.add(this._selectorGroup=new Y),this._isFirstRender=!0},r.prototype.getContentGroup=function(){return this._contentGroup},r.prototype.getSelectorGroup=function(){return this._selectorGroup},r.prototype.render=function(e,t,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var o=e.get("align"),u=e.get("orient");(!o||o==="auto")&&(o=e.get("left")==="right"&&u==="vertical"?"right":"left");var l=e.get("selector",!0),s=e.get("selectorPosition",!0);l&&(!s||s==="auto")&&(s=u==="horizontal"?"end":"start"),this.renderInner(o,e,t,n,l,u,s);var c=e.getBoxLayoutParams(),h={width:n.getWidth(),height:n.getHeight()},g=e.get("padding"),d=fe(c,h,g),p=this.layoutInner(e,o,d,i,l,s),v=fe(St({width:p.width,height:p.height},c),h,g);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=tr(p,e))}},r.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},r.prototype.renderInner=function(e,t,n,i,o,u,l){var s=this.getContentGroup(),c=$e(),h=t.get("selectedMode"),g=[];n.eachRawSeries(function(d){!d.get("legendHoverLink")&&g.push(d.id)}),le(t.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var f=new Y;f.newline=!0,s.add(f);return}var m=n.getSeriesByName(v)[0];if(!c.get(v))if(m){var y=m.getData(),x=y.getVisual("legendLineStyle")||{},A=y.getVisual("legendIcon"),b=y.getVisual("style"),S=this._createItem(m,v,p,d,t,e,x,b,A,h,i);S.on("click",W(Le,v,null,i,g)).on("mouseover",W(ce,m.name,null,i,g)).on("mouseout",W(ue,m.name,null,i,g)),n.ssr&&S.eachChild(function(_){var w=$(_);w.seriesIndex=m.seriesIndex,w.dataIndex=p,w.ssrType="legend"}),c.set(v,!0)}else n.eachRawSeries(function(_){if(!c.get(v)&&_.legendVisualProvider){var w=_.legendVisualProvider;if(!w.containName(v))return;var T=w.indexOfName(v),k=w.getItemVisual(T,"style"),C=w.getItemVisual(T,"legendIcon"),D=At(k.fill);D&&D[3]===0&&(D[3]=.2,k=K(K({},k),{fill:_t(D,"rgba")}));var I=this._createItem(_,v,p,d,t,e,{},k,C,h,i);I.on("click",W(Le,null,v,i,g)).on("mouseover",W(ce,null,v,i,g)).on("mouseout",W(ue,null,v,i,g)),n.ssr&&I.eachChild(function(L){var P=$(L);P.seriesIndex=_.seriesIndex,P.dataIndex=p,P.ssrType="legend"}),c.set(v,!0)}},this)},this),o&&this._createSelector(o,t,i,u,l)},r.prototype._createSelector=function(e,t,n,i,o){var u=this.getSelectorGroup();le(e,function(s){var c=s.type,h=new ie({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect",legendId:t.id})}});u.add(h);var g=t.getModel("selectorLabel"),d=t.getModel(["emphasis","selectorLabel"]);Fe(h,{normal:g,emphasis:d},{defaultText:s.title}),ye(h)})},r.prototype._createItem=function(e,t,n,i,o,u,l,s,c,h,g){var d=e.visualDrawType,p=o.get("itemWidth"),v=o.get("itemHeight"),f=o.isSelected(t),m=i.get("symbolRotate"),y=i.get("symbolKeepAspect"),x=i.get("icon");c=x||c||"roundRect";var A=ar(c,i,l,s,d,f,g),b=new Y,S=i.getModel("textStyle");if(me(e.getLegendIcon)&&(!x||x==="inherit"))b.add(e.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:m,itemStyle:A.itemStyle,lineStyle:A.lineStyle,symbolKeepAspect:y}));else{var _=x==="inherit"&&e.getData().getVisual("symbol")?m==="inherit"?e.getData().getVisual("symbolRotate"):m:0;b.add(nr({itemWidth:p,itemHeight:v,icon:c,iconRotate:_,itemStyle:A.itemStyle,symbolKeepAspect:y}))}var w=u==="left"?p+5:-5,T=u,k=o.get("formatter"),C=t;Z(k)&&k?C=k.replace("{name}",t??""):me(k)&&(C=k(t));var D=f?S.getTextColor():i.get("inactiveColor");b.add(new ie({style:Ct(S,{text:C,x:w,y:v/2,fill:D,align:T,verticalAlign:"middle"},{inheritColor:D})}));var I=new M({shape:b.getBoundingRect(),style:{fill:"transparent"}}),L=i.getModel("tooltip");return L.get("show")&&wt({el:I,componentModel:o,itemName:t,itemTooltipOption:L.option}),b.add(I),b.eachChild(function(P){P.silent=!0}),I.silent=!h,this.getContentGroup().add(b),ye(b),b.__legendDataIndex=n,b},r.prototype.layoutInner=function(e,t,n,i,o,u){var l=this.getContentGroup(),s=this.getSelectorGroup();F(e.get("orient"),l,e.get("itemGap"),n.width,n.height);var c=l.getBoundingRect(),h=[-c.x,-c.y];if(s.markRedraw(),l.markRedraw(),o){F("horizontal",s,e.get("selectorItemGap",!0));var g=s.getBoundingRect(),d=[-g.x,-g.y],p=e.get("selectorButtonGap",!0),v=e.getOrient().index,f=v===0?"width":"height",m=v===0?"height":"width",y=v===0?"y":"x";u==="end"?d[v]+=c[f]+p:h[v]+=g[f]+p,d[1-v]+=c[m]/2-g[m]/2,s.x=d[0],s.y=d[1],l.x=h[0],l.y=h[1];var x={x:0,y:0};return x[f]=c[f]+p+g[f],x[m]=Math.max(c[m],g[m]),x[y]=Math.min(0,g[y]+d[1-v]),x}else return l.x=h[0],l.y=h[1],this.group.getBoundingRect()},r.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},r.type="legend.plain",r})(It);function ar(a,r,e,t,n,i,o){function u(f,m){f.lineWidth==="auto"&&(f.lineWidth=m.lineWidth>0?2:0),le(f,function(y,x){f[x]==="inherit"&&(f[x]=m[x])})}var l=r.getModel("itemStyle"),s=l.getItemStyle(),c=a.lastIndexOf("empty",0)===0?"fill":"stroke",h=l.getShallow("decal");s.decal=!h||h==="inherit"?t.decal:Pt(h,o),s.fill==="inherit"&&(s.fill=t[n]),s.stroke==="inherit"&&(s.stroke=t[c]),s.opacity==="inherit"&&(s.opacity=(n==="fill"?t:e).opacity),u(s,t);var g=r.getModel("lineStyle"),d=g.getLineStyle();if(u(d,e),s.fill==="auto"&&(s.fill=t.fill),s.stroke==="auto"&&(s.stroke=t.fill),d.stroke==="auto"&&(d.stroke=t.fill),!i){var p=r.get("inactiveBorderWidth"),v=s[c];s.lineWidth=p==="auto"?t.lineWidth>0&&v?2:0:s.lineWidth,s.fill=r.get("inactiveColor"),s.stroke=r.get("inactiveBorderColor"),d.stroke=g.get("inactiveColor"),d.lineWidth=g.get("inactiveWidth")}return{itemStyle:s,lineStyle:d}}function nr(a){var r=a.icon||"roundRect",e=Dt(r,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return e.setStyle(a.itemStyle),e.rotation=(a.iconRotate||0)*Math.PI/180,e.setOrigin([a.itemWidth/2,a.itemHeight/2]),r.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function Le(a,r,e,t){ue(a,r,e,t),e.dispatchAction({type:"legendToggleSelect",name:a??r}),ce(a,r,e,t)}function Xe(a){for(var r=a.getZr().storage.getDisplayList(),e,t=0,n=r.length;t<n&&!(e=r[t].states.emphasis);)t++;return e&&e.hoverLayer}function ce(a,r,e,t){Xe(e)||e.dispatchAction({type:"highlight",seriesName:a,name:r,excludeSeriesId:t})}function ue(a,r,e,t){Xe(e)||e.dispatchAction({type:"downplay",seriesName:a,name:r,excludeSeriesId:t})}function ir(a){var r=a.findComponents({mainType:"legend"});r&&r.length&&a.filterSeries(function(e){for(var t=0;t<r.length;t++)if(!r[t].isSelected(e.name))return!1;return!0})}function z(a,r,e){var t=a==="allSelect"||a==="inverseSelect",n={},i=[];e.eachComponent({mainType:"legend",query:r},function(u){t?u[a]():u[a](r.name),Re(u,n),i.push(u.componentIndex)});var o={};return e.eachComponent("legend",function(u){G(n,function(l,s){u[l?"select":"unSelect"](s)}),Re(u,o)}),t?{selected:o,legendIndex:i}:{name:r.name,selected:o}}function Re(a,r){var e=r||{};return G(a.getData(),function(t){var n=t.get("name");if(!(n===`
`||n==="")){var i=a.isSelected(n);Lt(e,n)?e[n]=e[n]&&i:e[n]=i}}),e}function or(a){a.registerAction("legendToggleSelect","legendselectchanged",N(z,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",N(z,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",N(z,"inverseSelect")),a.registerAction("legendSelect","legendselected",N(z,"select")),a.registerAction("legendUnSelect","legendunselected",N(z,"unSelect"))}function Ke(a){a.registerComponentModel(se),a.registerComponentView(Ye),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,ir),a.registerSubTypeDefaulter("legend",function(){return"plain"}),or(a)}var sr=(function(a){O(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},r.prototype.init=function(e,t,n){var i=Rt(e);a.prototype.init.call(this,e,t,n),ke(this,e,i)},r.prototype.mergeOption=function(e,t){a.prototype.mergeOption.call(this,e,t),ke(this,this.option,e)},r.type="legend.scroll",r.defaultOption=Ne(se.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),r})(se);function ke(a,r,e){var t=a.getOrient(),n=[1,1];n[t.index]=0,kt(r,e,{type:"box",ignoreSize:!!n})}var Ge=ge,ae=["width","height"],ne=["x","y"],lr=(function(a){O(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.newlineDisabled=!0,e._currentIndex=0,e}return r.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new Ge),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Ge)},r.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},r.prototype.renderInner=function(e,t,n,i,o,u,l){var s=this;a.prototype.renderInner.call(this,e,t,n,i,o,u,l);var c=this._controllerGroup,h=t.get("pageIconSize",!0),g=J(h)?h:[h,h];p("pagePrev",0);var d=t.getModel("pageTextStyle");c.add(new ie({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,f){var m=v+"DataIndex",y=Gt(t.get("pageIcons",!0)[t.getOrient().name][f],{onclick:Ot(s._pageGo,s,m,t,i)},{x:-g[0]/2,y:-g[1]/2,width:g[0],height:g[1]});y.name=v,c.add(y)}},r.prototype.layoutInner=function(e,t,n,i,o,u){var l=this.getSelectorGroup(),s=e.getOrient().index,c=ae[s],h=ne[s],g=ae[1-s],d=ne[1-s];o&&F("horizontal",l,e.get("selectorItemGap",!0));var p=e.get("selectorButtonGap",!0),v=l.getBoundingRect(),f=[-v.x,-v.y],m=Tt(n);o&&(m[c]=n[c]-v[c]-p);var y=this._layoutContentAndController(e,i,m,s,c,g,d,h);if(o){if(u==="end")f[s]+=y[c]+p;else{var x=v[c]+p;f[s]-=x,y[h]-=x}y[c]+=v[c]+p,f[1-s]+=y[d]+y[g]/2-v[g]/2,y[g]=Math.max(y[g],v[g]),y[d]=Math.min(y[d],v[d]+f[1-s]),l.x=f[0],l.y=f[1],l.markRedraw()}return y},r.prototype._layoutContentAndController=function(e,t,n,i,o,u,l,s){var c=this.getContentGroup(),h=this._containerGroup,g=this._controllerGroup;F(e.get("orient"),c,e.get("itemGap"),i?n.width:null,i?null:n.height),F("horizontal",g,e.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=g.getBoundingRect(),v=this._showController=d[o]>n[o],f=[-d.x,-d.y];t||(f[i]=c[s]);var m=[0,0],y=[-p.x,-p.y],x=Bt(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(v){var A=e.get("pageButtonPosition",!0);A==="end"?y[i]+=n[o]-p[o]:m[i]+=p[o]+x}y[1-i]+=d[u]/2-p[u]/2,c.setPosition(f),h.setPosition(m),g.setPosition(y);var b={x:0,y:0};if(b[o]=v?n[o]:d[o],b[u]=Math.max(d[u],p[u]),b[l]=Math.min(0,p[l]+y[1-i]),h.__rectSize=n[o],v){var S={x:0,y:0};S[o]=Math.max(n[o]-p[o]-x,0),S[u]=b[u],h.setClipPath(new M({shape:S})),h.__rectSize=S[o]}else g.eachChild(function(w){w.attr({invisible:!0,silent:!0})});var _=this._getPageInfo(e);return _.pageIndex!=null&&V(c,{x:_.contentPosition[0],y:_.contentPosition[1]},v?e:null),this._updatePageInfoView(e,_),b},r.prototype._pageGo=function(e,t,n){var i=this._getPageInfo(t)[e];i!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:t.id})},r.prototype._updatePageInfoView=function(e,t){var n=this._controllerGroup;G(["pagePrev","pageNext"],function(c){var h=c+"DataIndex",g=t[h]!=null,d=n.childOfName(c);d&&(d.setStyle("fill",g?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),d.cursor=g?"pointer":"default")});var i=n.childOfName("pageText"),o=e.get("pageFormatter"),u=t.pageIndex,l=u!=null?u+1:0,s=t.pageCount;i&&o&&i.setStyle("text",Z(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",s==null?"":s+""):o({current:l,total:s}))},r.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,o=e.getOrient().index,u=ae[o],l=ne[o],s=this._findTargetItemIndex(t),c=n.children(),h=c[s],g=c.length,d=g?1:0,p={contentPosition:[n.x,n.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return p;var v=A(h);p.contentPosition[o]=-v.s;for(var f=s+1,m=v,y=v,x=null;f<=g;++f)x=A(c[f]),(!x&&y.e>m.s+i||x&&!b(x,m.s))&&(y.i>m.i?m=y:m=x,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),y=x;for(var f=s-1,m=v,y=v,x=null;f>=-1;--f)x=A(c[f]),(!x||!b(y,x.s))&&m.i<y.i&&(y=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=x;return p;function A(S){if(S){var _=S.getBoundingRect(),w=_[l]+S[l];return{s:w,e:w+_[u],i:S.__legendDataIndex}}}function b(S,_){return S.e>=_&&S.s<=_+i}},r.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var t,n=this.getContentGroup(),i;return n.eachChild(function(o,u){var l=o.__legendDataIndex;i==null&&l!=null&&(i=u),l===e&&(t=u)}),t??i},r.type="legend.scroll",r})(Ye);function cr(a){a.registerAction("legendScroll","legendscroll",function(r,e){var t=r.scrollDataIndex;t!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:r},function(n){n.setScrollDataIndex(t)})})}function ur(a){q(Ke),a.registerComponentModel(sr),a.registerComponentView(lr),cr(a)}function hr(a){q(Ke),q(ur)}q([er,Nt,Wt,Vt,hr]);function pr({data:a,color:r,label:e,value:t,dates:n,formatValue:i}){const{theme:o}=Oe(),u=E.useMemo(()=>{if(a.length===0)return 0;const s=a.slice(-7);return s.reduce((h,g)=>h+g,0)/s.length},[a]),l=E.useMemo(()=>({grid:{left:0,right:0,top:0,bottom:0},legend:{show:!1},xAxis:{type:"category",show:!1,data:n||a.map((s,c)=>`Day ${c+1}`)},yAxis:{type:"value",show:!1},tooltip:{trigger:"axis",backgroundColor:o==="dark"?"#1f2937":"#ffffff",borderColor:o==="dark"?"#374151":"#e5e7eb",textStyle:{color:o==="dark"?"#fff":"#111827",fontSize:11},formatter:s=>{const c=s;if(!c||c.length===0)return"";const h=c[0],g=h.axisValue||"",d=h.value,p=i?i(d):d!==void 0?d.toString():"",v=i?i(u):u.toFixed(2),f=o==="dark"?"#9ca3af":"#6b7280";return`<div style="font-size: 11px;">
          <div style="color: ${f}; margin-bottom: 2px;">${g}</div>
          <div style="font-weight: 600;">${e}: ${p}</div>
          <div style="color: ${f}; margin-top: 4px; font-size: 10px;">7-day avg: ${v}</div>
        </div>`},axisPointer:{type:"line",lineStyle:{color:r,width:1,type:"solid"}}},series:[{type:"bar",data:a,itemStyle:{color:r,borderRadius:[2,2,0,0]},barWidth:"60%"}]}),[a,r,n,i,e,u,o]);return B.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[B.jsxs("div",{className:"flex-1",children:[B.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e}),B.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t})]}),B.jsx("div",{className:"w-24 h-12 sm:w-32 sm:h-12",children:B.jsx(Me,{echarts:Ue,option:l,notMerge:!0,lazyUpdate:!0,style:{height:"100%",width:"100%"},opts:{renderer:"canvas"}})})]})}function vr({transactionData:a,volumeData:r,dates:e,formatTransaction:t,formatVolume:n,maxTransaction:i,maxVolume:o}){const{theme:u}=Oe(),l=E.useMemo(()=>{if(a.length===0)return 0;const h=a.slice(-7);return h.reduce((d,p)=>d+p,0)/h.length},[a]),s=E.useMemo(()=>{if(r.length===0)return 0;const h=r.slice(-7);return h.reduce((d,p)=>d+p,0)/h.length},[r]),c=E.useMemo(()=>({grid:{left:0,right:0,top:0,bottom:0},legend:{show:!1},xAxis:{type:"category",show:!1,data:e||a.map((h,g)=>`Day ${g+1}`)},yAxis:[{type:"value",show:!1,min:0,max:i,minInterval:1},{type:"value",show:!1,min:0,max:o}],tooltip:{trigger:"axis",backgroundColor:u==="dark"?"#1f2937":"#ffffff",borderColor:u==="dark"?"#374151":"#e5e7eb",textStyle:{color:u==="dark"?"#fff":"#111827",fontSize:11},formatter:h=>{const g=h;if(!g||g.length===0)return"";const d=g[0].axisValue||"",p=u==="dark"?"#9ca3af":"#6b7280",v=u==="dark"?"#374151":"#e5e7eb";let f=`<div style="font-size: 11px;">
          <div style="color: ${p}; margin-bottom: 4px;">${d}</div>`;g.forEach(x=>{let A;const b=x.dataIndex??0;x.seriesName==="Transactions"?A=a[b]:A=r[b];let S="";x.seriesName==="Transactions"?S=t?t(A):A.toString():S=n?n(A):A.toString(),f+=`<div style="font-weight: 600; color: ${x.seriesName==="Transactions"?"#3b82f6":"#10b981"};">
            ${x.seriesName}: ${S}
          </div>`});const m=t?t(l):l.toFixed(2),y=n?n(s):s.toFixed(8);return f+=`<div style="color: ${p}; margin-top: 6px; padding-top: 4px; border-top: 1px solid ${v}; font-size: 10px;">
          <div style="margin-bottom: 2px;">7-day avg</div>
          <div style="color: #3b82f6;">Transactions: ${m}</div>
          <div style="color: #10b981;">Volume: ${y}</div>
        </div>`,f+="</div>",f},axisPointer:{type:"shadow"}},series:[{name:"Transactions",type:"bar",data:a.map(h=>h===0?a.some(d=>d>0)?Math.max(...a)*.02:.1:h),yAxisIndex:0,itemStyle:{color:h=>a[h.dataIndex]===0?"#3b82f633":"#3b82f6",borderRadius:[2,2,0,0]},barGap:"20%",barWidth:"30%"},{name:"Volume",type:"bar",data:r.map(h=>h===0?r.some(d=>d>0)?Math.max(...r)*.02:1e-7:h),yAxisIndex:1,itemStyle:{color:h=>r[h.dataIndex]===0?"#10b98133":"#10b981",borderRadius:[2,2,0,0]},barWidth:"30%"}]}),[a,r,e,t,n,i,o,l,s,u]);return B.jsx("div",{className:"w-full h-10 md:h-14 xl:h-16",children:B.jsx(Me,{echarts:Ue,option:c,notMerge:!0,lazyUpdate:!0,style:{height:"100%",width:"100%"},opts:{renderer:"canvas"}})})}export{vr as CombinedMiniChart,pr as MiniChart};
